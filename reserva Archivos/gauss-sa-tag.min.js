!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.log=t()}(this,function(){"use strict";function n(e,t){var a=e[t];if("function"==typeof a.bind)return a.bind(e);try{return Function.prototype.bind.call(a,e)}catch(t){return function(){return Function.prototype.apply.apply(a,[e,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(e,t){for(var a=0;a<c.length;a++){var n=c[a];this[n]=a<e?o:this.methodFactory(n,e,t)}this.log=this.debug}function u(e,t,a){return"debug"===(e=e)&&(e="log"),typeof console!==l&&("trace"===e&&i?r:void 0!==console[e]?n(console,e):void 0!==console.log?n(console,"log"):o)||function(e,t,a){return function(){typeof console!==l&&(s.call(this,t,a),this[e].apply(this,arguments))}}.apply(this,arguments)}function t(a,t,e){function n(){var e;if(typeof window!==l&&i){try{e=window.localStorage[i]}catch(e){}if(typeof e===l)try{var t=window.document.cookie,a=t.indexOf(encodeURIComponent(i)+"=");-1!==a&&(e=/^([^;]+)/.exec(t.slice(a))[1])}catch(e){}return e=void 0===o.levels[e]?void 0:e}}var r,o=this;t=null==t?"WARN":t;var i="loglevel";"string"==typeof a?i+=":"+a:"symbol"==typeof a&&(i=void 0),o.name=a,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=e||u,o.getLevel=function(){return r},o.setLevel=function(e,t){if(!("number"==typeof(e="string"==typeof e&&void 0!==o.levels[e.toUpperCase()]?o.levels[e.toUpperCase()]:e)&&0<=e&&e<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(r=e,!1!==t&&function(e){var t=(c[e]||"silent").toUpperCase();if(typeof window!==l&&i){try{return window.localStorage[i]=t}catch(e){}try{window.document.cookie=encodeURIComponent(i)+"="+t+";"}catch(e){}}}(e),s.call(o,e,a),typeof console===l&&e<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){t=e,n()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(t,!1),function(){if(typeof window!==l&&i){try{return window.localStorage.removeItem(i)}catch(e){}try{window.document.cookie=encodeURIComponent(i)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};e=n();null==e&&(e=t),o.setLevel(e,!1)}var o=function(){},l="undefined",i=typeof window!==l&&typeof window.navigator!==l&&/Trident\/|MSIE /.test(window.navigator.userAgent),c=["trace","debug","info","warn","error"],a=new t,d={};a.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return d[e]||(d[e]=new t(e,a.getLevel(),a.methodFactory))};var e=typeof window!==l?window.log:void 0;return a.noConflict=function(){return typeof window!==l&&window.log===a&&(window.log=e),a},a.getLoggers=function(){return d},a.default=a}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.prefix=t(e)}(this,function(e){"use strict";var r,t,o={template:"[%t] %l:",levelFormatter:function(e){return e.toUpperCase()},nameFormatter:function(e){return e||"root"},timestampFormatter:function(e){return e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},p={},a={reg:function(e){if(!e||!e.getLogger)throw new TypeError("Argument is not a root logger");r=e},apply:function(e,t){if(!e||!e.setLevel)throw new TypeError("Argument is not a logger");var a=e.methodFactory,f=e.name||"",n=p[f]||p[""]||o;return p[f]||(e.methodFactory=function(s,e,u){var l=a(s,e,u),c=p[u]||p[""],d=-1!==c.template.indexOf("%t"),g=-1!==c.template.indexOf("%l"),h=-1!==c.template.indexOf("%n");return function(){for(var e,t,a,n="",r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];!f&&p[u]||(e=c.timestampFormatter(new Date),t=c.levelFormatter(s),a=c.nameFormatter(u),c.format?n+=c.format(t,a,e):(n+=c.template,d&&(n=n.replace(/%t/,e)),g&&(n=n.replace(/%l/,t)),h&&(n=n.replace(/%n/,a))),o.length&&"string"==typeof o[0]?o[0]=n+" "+o[0]:o.unshift(n)),l.apply(void 0,o)}}),(t=t||{}).template&&(t.format=void 0),p[f]=function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(t in arguments[a])Object.prototype.hasOwnProperty.call(arguments[a],t)&&(e[t]=arguments[a][t]);return e}({},n,t),e.setLevel(e.getLevel()),r||e.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),e}};return e&&(t=e.prefix,a.noConflict=function(){return e.prefix===a&&(e.prefix=t),a}),a}),function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):(window.WatchJS=e(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var i={noMore:!1,useDirtyCheck:!1},s=[],u=[],o=[],l=!1;try{l=Object.defineProperty&&Object.defineProperty({},"x",{})}catch(i){}function c(e,t){var a=[],n=[];if("string"!=typeof e&&"string"!=typeof t){if(p(e)&&t)for(var r=0;r<e.length;r++)void 0===t[r]&&a.push(r);else for(var r in e)e.hasOwnProperty(r)&&t&&!t.hasOwnProperty(r)&&a.push(r);if(p(t)&&e)for(var o=0;o<t.length;o++)void 0===e[o]&&n.push(o);else for(var o in t)t.hasOwnProperty(o)&&e&&!e.hasOwnProperty(o)&&n.push(o)}return{added:a,removed:n}}function d(e,t,a,n,r){if("string"!=typeof e&&(e instanceof Object||p(e)))for(var o=0;o<t.length;o++){var i=t[o];g(e,i,a,n,r)}}function g(e,t,a,n,r){"string"!=typeof e&&(e instanceof Object||p(e))&&(f(e[t])||(null!=e[t]&&(void 0===n||0<n)&&v(e[t],a,void 0!==n?n-1:n),_(e,t,a,n),r&&(void 0===n||0<n)&&R(e,t,a,n)))}function e(e,n){if(!(e instanceof String)&&(e instanceof Object||p(e)))if(p(e)){for(var t=["__watchall__"],a=0;a<e.length;a++)t.push(a);h(e,t,n)}else{function r(e){var t,a=[];for(t in e)e.hasOwnProperty(t)&&(e[t]instanceof Object?r(e[t]):a.push(t));h(e,a,n)}r(e)}}function h(e,t,a){for(var n in t)t.hasOwnProperty(n)&&E(e,t[n],a)}var f=function(e){return e&&"[object Function]"=={}.toString.call(e)},p=function(e){return"[object Array]"===Object.prototype.toString.call(e)},w=function(e){return"[object Object]"==={}.toString.apply(e)},y=function(e){if(null==e||"object"!=typeof e)return e;var t,a=e.constructor();for(t in e)a[t]=e[t];return a},r=function(t,a,n){try{Object.defineProperty(t,a,{enumerable:!1,configurable:!0,writable:!1,value:n})}catch(e){t[a]=n}},m=function(e,t,a){u[u.length]={prop:t,object:e,orig:y(e[t]),callback:a}},v=function(e,t,a,n){if("string"!=typeof e&&(e instanceof Object||p(e))){if(p(e)){if(_(e,"__watchall__",t,a),void 0===a||0<a)for(var r=0;r<e.length;r++)v(e[r],t,a,n)}else{var o=[];for(r in e)"$val"==r||!l&&"watchers"===r||Object.prototype.hasOwnProperty.call(e,r)&&o.push(r);d(e,o,t,a,n)}n&&R(e,"$$watchlengthsubjectroot",t,a)}},t=[],a=null;function n(){a=null;for(var e=0;e<t.length;e++)t[e]();t.length=0}function L(){var e=null;k=null;for(var t=0;t<o.length;t++)e=o[t],T(e.obj,e.prop,e.mode,e.newval,e.oldval);e&&(o=[])}var b=function(){return a=a||setTimeout(n)},I=function(e){null==a&&b(),t[t.length]=e},x=function(o,i,e,t){var s=null,u=-1,l=p(o);v(o,function(e,t,a,n){var r=b();if(u!==r&&(u=r,(s={type:"update"}).value=o,s.splices=null,I(function(){i.call(this,s),s=null})),l&&o===this&&null!==s){if("pop"===t||"shift"===t)a=[],n=[n];else if("push"===t||"unshift"===t)a=[a],n=[];else if("splice"!==t)return;s.splices||(s.splices=[]),s.splices[s.splices.length]={index:e,deleteCount:n?n.length:0,addedCount:a?a.length:0,added:a,deleted:n}}},1==e?void 0:0,t)},_=function(u,l,e,c){var t=!1,a=p(u);u.watchers||(r(u,"watchers",{}),a&&P(u,function(e,t,a,n){if(A(u,e,t,a,n),0!==c&&a&&(w(a)||p(a)))for(var r,o=u.watchers[l],i=(o=(n=u.watchers.__watchall__)?o?o.concat(n):n:o)?o.length:0,s=0;s<i;s++)if("splice"!==t)v(a,o[s],void 0===c?c:c-1);else for(r=0;r<a.length;r++)v(a[r],o[s],void 0===c?c:c-1)})),u.watchers[l]||(u.watchers[l]=[],a||(t=!0));for(var o,n=0;n<u.watchers[l].length;n++)if(u.watchers[l][n]===e)return;u.watchers[l].push(e),t&&(o=u[l],t=function(e,t){var a=o;if(o=e,0!==c&&u[l]&&(w(u[l])||p(u[l]))&&!u[l].watchers)for(var n=u.watchers[l].length,r=0;r<n;r++)v(u[l],u.watchers[l][r],void 0===c?c:c-1);C(u,l)?S(u,l):i.noMore||a!==e&&((t?A:T)(u,l,"set",e,a),i.noMore=!1)},i.useDirtyCheck?m(u,l,t):function(t,a,n,r){try{Object.defineProperty(t,a,{get:n,set:function(e){r.call(this,e,!0)},enumerable:!0,configurable:!0})}catch(e){try{Object.prototype.__defineGetter__.call(t,a,n),Object.prototype.__defineSetter__.call(t,a,function(e){r.call(this,e,!0)})}catch(n){m(t,a,r)}}}(u,l,function(){return o},t))},T=function(e,t,a,n,r){if(void 0!==t)for(var o,i=e.watchers[t],s=(i=(o=e.watchers.__watchall__)?i?i.concat(o):o:i)?i.length:0,u=0;u<s;u++)i[u].call(e,t,a,n,r);else for(var t in e)e.hasOwnProperty(t)&&T(e,t,a,n,r)},O=["pop","push","reverse","shift","sort","slice","unshift","splice"],P=function(e,t){if(f(t)&&e&&!(e instanceof String)&&p(e))for(var a,n=O.length;n--;)!function(o,i,s,u){r(o,s,function(){var e=0;if("splice"===s){for(var t=arguments[0],a=o.slice(t,t+arguments[1]),n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e=t}else n=0<arguments.length?arguments[0]:void 0;return t=i.apply(o,arguments),"slice"!==s&&("pop"===s?(a=t,e=o.length):"push"===s?e=o.length-1:"shift"===s?a=t:"unshift"!==s&&void 0===n&&(n=t),u.call(o,e,s,n,a)),t})}(e,e[a=O[n]],a,t)},E=function(e,t,a){if(t){if(e.watchers[t])if(void 0===a)delete e.watchers[t];else for(var n=0;n<e.watchers[t].length;n++)e.watchers[t][n]==a&&e.watchers[t].splice(n,1)}else delete e.watchers;(function(e,t,a){for(var n=0;n<s.length;n++){var r=s[n];r.obj==e&&(t&&r.prop!=t||a&&r.watcher!=a||s.splice(n--,1))}})(e,t,a),function(e,t){for(var a=0;a<u.length;a++){var n=u[a],r=n.object.watchers;n.object==e&&(!t||n.prop==t)&&r&&(!t||!r[t]||0==r[t].length)&&u.splice(a--,1)}}(e,t)},C=function(e,t){return e.watchers&&(e.watchers.__wjs_suspend__||e.watchers["__wjs_suspend__"+t])},S=function(e,t){I(function(){delete e.watchers.__wjs_suspend__,delete e.watchers["__wjs_suspend__"+t]})},k=null,A=function(e,t,a,n,r){o[o.length]={obj:e,prop:t,mode:a,newval:n,oldval:r},null===k&&(k=setTimeout(L))},R=function(e,t,a,n){var r=y("$$watchlengthsubjectroot"===t?e:e[t]);s.push({obj:e,prop:t,actual:r,watcher:a,level:n})};return setInterval(function(){for(var e,t,a=0;a<s.length;a++){var n,r=s[a];if("$$watchlengthsubjectroot"===r.prop)((n=c(r.obj,r.actual)).added.length||n.removed.length)&&(n.added.length&&d(r.obj,n.added,r.watcher,r.level-1,!0),r.watcher.call(r.obj,"root","differentattr",n,r.actual)),r.actual=y(r.obj);else{if((n=c(r.obj[r.prop],r.actual)).added.length||n.removed.length){if(n.added.length)for(var o=0;o<r.obj.watchers[r.prop].length;o++)d(r.obj[r.prop],n.added,r.obj.watchers[r.prop][o],r.level-1,!0);T(r.obj,r.prop,"differentattr",n,r.actual)}r.actual=y(r.obj[r.prop])}}if(0<u.length)for(a=0;a<u.length;a++)t=(e=u[a]).object[e.prop],function(e,t){var a,n=!0;if(e!==t)if(w(e)){for(a in e)if((l||"watchers"!==a)&&e[a]!==t[a]){n=!1;break}}else n=!1;return n}(e.orig,t)||(e.orig=y(t),e.callback(t))},50),i.watch=function(){(f(arguments[1])?v:p(arguments[1])?d:g).apply(this,arguments)},i.unwatch=function(){(f(arguments[1])?e:p(arguments[1])?h:E).apply(this,arguments)},i.callWatchers=T,i.suspend=function(e,t){e.watchers&&(e.watchers["__wjs_suspend__"+(void 0!==t?t:"")]=!0)},i.onChange=function(){(f(arguments[2])?function(e,t,o,i,s){e&&t&&(g(e,t,function(e,t,a,n){var r={type:"update"};r.value=a,r.oldvalue=n,(i&&w(a)||p(a))&&x(a,o,i,s),o.call(this,r)},0),(i&&w(e[t])||p(e[t]))&&x(e[t],o,i,s))}:x).apply(this,arguments)},i}),function(){"use strict";var r=Date.now(),h=log.noConflict();h.setLevelToAll=function(e,t){var a,n=h.getLoggers();for(a in n)n[a].setLevel(e)},prefix.reg(h),prefix.apply(h,{template:"[%t] [%l] [%n]:"});var o={id:"default",enableManualMode:!1,logging:"info",commonPrefix:"gp_",runInsideIframe:!1,cache:{type:"localStorage",storageKeyName:"gs",sendTimeout:500,maxItems:200,checkTimeout:50},sender:{requestUrl:null,requestTimeout:5e3,retries:0,messageFormat:"v1Compressed",callbackFn:function(e,t,a){var n,r=this.log.getLogger("activation");r.debug("activating the server request",e,t,a),t&&("string"==typeof t&&(t=JSON.parse(t)),n=window[this.config.dataLayerId],null!=t.gtm_push&&(r.debug("dataLayer.push:",t),Array.isArray(t.gtm_push)?t.gtm_push.forEach(function(e){n.push(e)}):n.push(t.gtm_push)),null!=t.utag_link&&(r.debug("utag.link:",t),Array.isArray(t.utag_link)?t.utag_link.forEach(function(e){n.link(e)}):n.link(t.utag_link)))}},user:{provider:"local",local:{storageType:"cookie",storageId:"gaussUserId",idLength:20},ga:{objectName:"ga",idRetrievalOrder:["ga4Gtag","ga4Cookie","ga"]},globalVar:{path:"gaGlobal.vid"},cookie:{name:"_ga",extractRegex:"\\w+\\.[\\w-]+\\.([\\w.]+)",captureIndex:0},getGAClientId:!0,waitTimeout:50,waitMaxTimeout:3e3},dataLayer:{enabled:!0,provider:"GTM",watchProps:[],dataLayerId:"dataLayer",exclude:'event": *"gtm|event": *"gauss|"0": *"',include:null,excludeProps:null,includeProps:null,waitTimeout:50,waitMaxTimeout:3e3},dom:{enabled:!0}},f=new function(){var i=h.getLogger("utils");this.updateObject=function(t,a){Object.keys(a).forEach(function(e){"object"!=typeof a[e]||Array.isArray(a[e])||null===a[e]||null===t[e]?t[e]=a[e]:f.updateObject(t[e],a[e])})},this.deepCopy=function(e){if("object"!=typeof e||null===e)return e;const t=Array.isArray(e)?[]:{};for(const a in e)e.hasOwnProperty(a)&&(t[a]=this.deepCopy(e[a]));return t},this.makeId=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*a));return n},this.getTabId=function(e,t){var a=null;try{a=sessionStorage.getItem(e)}catch(e){i.error("Failed to get tab id.",e.message)}if(null===a){a=this.makeId(t);try{sessionStorage.setItem(e,a)}catch(e){i.error("Failed to set tab id.",e.message),a=null}}return a},this.stringifySafe=function(e){try{var t=JSON.stringify(e)}catch(e){i.debug("Encountered error while stringifying object.",e.message);t=null}return t},this.waitFor=function(e,t,a,n,r){i.debug("Waiting for the condition",a);var o=this;setTimeout(function(){a<t?n()?r():o.waitFor(e,t,a+e,n,r):i.info("Provider was not loaded in time. Aborting Gauss.")},e)},this.getGlobalVar=function(e){for(var t=window,a=e.split("."),n=0;n<a.length;++n){if(!t.hasOwnProperty(a[n]))return null;t=t[a[n]]}return t},this.getCookie=function(e,t,a){var n,r=new RegExp(t);for(n of document.cookie.split(";")){var o=n.split("="),i=o[0].trim(),o=o[1];if(i==e){o=o.match(r);return o&&o.length>a?o[a+1]:null}}return null}},p=new function(){if(this.id=void 0!==o&&o.id||"default",window.gp&&window.gp.hasOwnProperty(this.id))throw new Error("Gauss Tag with the same id `"+this.id+"` already exists.");this.initIds=new Set,this.loadTime=r,this.alreadyInitialized=!1,this.senderMessageTranslations={},this.dataLayerProviders={},this.userProviders={},this.USER_PROVIDERS=["local","ga","cookie","globalvar"],this.GA_RETRIEVAL_ORDER=["ga4Gtag","ga4Cookie","ga"],this.GA_GLOBAL_VAR="gaGlobal.vid",this.GA_COOKIE_NAME="_ga",this.GA_COOKIE_REGEX="\\w+\\.[\\w-]+\\.([\\w.]+)",this.GA_COOKIE_INDEX=0;var t=this,e=o.logging;!1===e?h.setLevel("silent"):!0===e?h.setLevel("error"):h.setLevel(e);var a=h.getLogger;h.getLogger=function(e){return a(e+"-"+t.id)};var n=h.getLogger("config");this.setConfigProperties=function(e){e.hasOwnProperty("logging")&&h.setLevelToAll(e.logging),n.debug("Setting properties",e);var t=f.deepCopy(o);if(f.updateObject(t,e),this.enableManualMode=t.enableManualMode,this.loadTimeKey="__gp_loadTime_"+this.id,this.clientVersion="d0faa8e","undefined"===t.commonPrefix?this.commonPrefix="gp_":this.commonPrefix=t.commonPrefix,this.runInsideIframe=t.runInsideIframe,this.requestTimeout=t.sender.requestTimeout,this.requestRetries=t.sender.retries,this.requestUrl=t.sender.requestUrl,this.senderMessageFormat=t.sender.messageFormat,this.senderCallback=t.sender.callbackFn,this.cacheType=t.cache.type,this.cacheStorageKeyName=this.commonPrefix+this.id+"_"+t.cache.storageKeyName,this.cacheSendTimeout=t.cache.sendTimeout,this.cacheCheckTimeout=t.cache.checkTimeout,this.cacheMaxItems=t.cache.maxItems,this.userProvider=t.user.provider,this.userProvider=this.userProvider.toLowerCase(),this.userProvider&&-1!=this.USER_PROVIDERS.indexOf(this.userProvider)||(this.userProvider="local"),t.user.hasOwnProperty("ga")&&t.user.ga.hasOwnProperty("objectName")&&t.user.gaObjectName?this.userGaObjectName=t.user.ga.objectName:this.userGaObjectName="ga",this.userGaIdRetrievalOrder=t.user.ga.idRetrievalOrder||this.GA_RETRIEVAL_ORDER,this.userGlobalVarName=t.user.globalVar.path||this.GA_GLOBAL_VAR,this.userCookieName=t.user.cookie.name||this.GA_COOKIE_NAME,this.userCookieExtractRegex=t.user.cookie.extractRegex||this.GA_COOKIE_REGEX,this.userCookieCaptureIndex=0===t.user.cookie.captureIndex||t.user.cookie.captureIndex?t.user.cookie.captureIndex:this.GA_COOKIE_INDEX,this.userGetGAClientId=t.user.getGAClientId,"local"===this.userProvider.toLowerCase()&&(this.userLocalStorageType=t.user.local.storageType,this.userLocalStorageId=this.commonPrefix+t.user.local.storageId,this.userLocalIdLength=t.user.local.idLength||20),this.userWaitTimeout=t.user.waitTimeout,this.userWaitMaxTimeout=t.user.waitMaxTimeout||0,this.dataLayerEnabled=t.dataLayer.enabled,this.dataLayerProvider=t.dataLayer.provider,this.dataLayerWatchProps=t.dataLayer.watchProps,this.dataLayerWaitTimeout=t.dataLayer.waitTimeout,this.dataLayerWaitMaxTimeout=t.dataLayer.waitMaxTimeout||0,this.dataLayerId=t.dataLayer.dataLayerId,this.dataLayerId||("GTM"===t.dataLayer.provider?this.dataLayerId="dataLayer":"tealium"===t.dataLayer.provider&&(this.dataLayerId="utag")),this.dataLayerExclude=t.dataLayer.exclude,this.dataLayerExclude)try{this.dataLayerExclude=new RegExp(this.dataLayerExclude)}catch(e){n.debug("Encountered error while constructing Data Layer regex:",e.message),this.dataLayerExclude=null}if(this.dataLayerInclude=t.dataLayer.include,this.dataLayerInclude)try{this.dataLayerInclude=new RegExp(this.dataLayerInclude)}catch(e){n.debug("Encountered error while constructing Data Layer include regex:",e.message),this.dataLayerInclude=null}this.dataLayerBlockWithProps=t.dataLayer.blockWithProps,this.dataLayerExcludeProps=t.dataLayer.excludeProps||"(?!.*)";try{this.dataLayerExcludeProps=new RegExp(this.dataLayerExcludeProps)}catch(e){n.debug("Encountered error while constructing Data Layer properties exclude regex:",e.message),this.dataLayerExcludeProps=null}this.dataLayerIncludeProps=t.dataLayer.includeProps||"(?!.*)";try{this.dataLayerIncludeProps=new RegExp(this.dataLayerIncludeProps)}catch(e){n.debug("Encountered error while constructing Data Layer properties include regex:",e.message),this.dataLayerIncludeProps=null}this.domInterceptorEnabled=t.dom.enabled,this.domPageLoadKeepTimeout=t.dom.pageLoadKeepTimeout},this.setConfigProperties({}),window.hasOwnProperty(this.loadTimeKey)?this.samePageLoad=!0:(this.samePageLoad=!1,window[this.loadTimeKey]=this.loadTime),this.tabIdKey="__gp_tab_id_"+this.id,this.tabId=f.getTabId(this.tabIdKey,this.userLocalIdLength)};p.senderMessageTranslations.v1Compressed={clientVersion:"cVer",clientId:"cId",tagId:"tagId",tabId:"tabId",timezone:"tz",userAgent:"ua",gtmContainerID:"gtm",gtmAccount:"gtma",devWidth:"devw",devHeight:"devh",devPixelRatio:"devpx",navLanguage:"navLan",message:"msg",category:"cat",action:"act",timestamp:"ts",eventLabel:"label",originating:"ori",referrer:"ref",Page:"pa",Load:"lo",DataLayerPush:"push",eCommerce:"dl",userId:"uID"},function(){f.t=function(e){var t=p.senderMessageTranslations[p.senderMessageFormat];return t&&t.hasOwnProperty(e)?t[e]:e};function a(){c.restore(),c.sendCache();var e=l.getUserId();i.debug("Script loaded for",e),p.enableManualMode||(p.domInterceptorEnabled&&n.initialize(),p.dataLayerEnabled&&d.initialize()),c.startCheck()}function r(t,e){i.debug("Initializing tag",t,e),window.gp.hasOwnProperty(t)?window.gp[t].config.alreadyInitialized?i.error("Gauss Tag id was already initialized: "+t+"`"):(Object.keys(window.gp).forEach(function(e){window.gp[e].config.hasOwnProperty("initIds")&&(i.debug("Adding id to the initIds",e,t),window.gp[e].config.initIds.add(t))}),"object"==typeof e&&window.gp[t].config.setConfigProperties(e),i.debug("Started initializing modules"),p.alreadyInitialized=!0,c=new c,w=new w,n=new n,d=new d,window.gp[p.id].sender=w,new p.userProviders[p.userProvider],window.gp[p.id].cache=c,window.gp[p.id].interceptorDOM=n,window.gp[p.id].interceptorDataLayer=d,p.dataLayerEnabled&&new p.dataLayerProviders[p.dataLayerProvider],l.waitForLoad(function(){d.waitFor(a)})):i.error("Gauss Tag id does not exist: `"+t+"`")}f.send_function=function(e,t,a,n){switch(i.debug("Received action:",e,t,a),e){case"config":a?r(t,a):r("default",t);break;case"event":if("undefined"==t)return void i.warning("Category for the event was not provided");!function(e,t,a){i.debug("Creating event",e,t,a);var n={};n[f.t("category")]=f.t("event"),n[f.t("action")]=f.t(t),(n[f.t("data")]=a)?window.gp[e].cache.store(n):p.initIds.forEach(function(e){window.gp[e].cache.store(n)})}(t,a,n);break;default:i.debug("Action",e,"is not recognized.")}}}();var w=function(){var n=h.getLogger("sender"),a=p.requestRetries,r=0;this.startSendingData=function(e){var t=Date.now(),e=f.deepCopy(e);r=t,s(),i(o(e),t)};var o=function(e){var t={};return t[f.t("clientVersion")]=p.clientVersion,t[f.t("clientId")]=l.getUserId(),t[f.t("ga-cid")]=l.getGAClientId(),t[f.t("now")]=Date.now(),t[f.t("timezone")]=60*(new Date).getTimezoneOffset(),t[f.t("userId")]=l.getUserId(),t[f.t("userAgent")]=navigator.userAgent,t[f.t("tagId")]=p.id,t[f.t("tabId")]=p.tabId,t[f.t("gtmContainerID")]=d.getDataLayerID(),t[f.t("gtmAccount")]=p.gtmAccount,t[f.t("devWidth")]=window.screen.width,t[f.t("devHeight")]=window.screen.height,t[f.t("devPixelRatio")]=window.devicePixelRatio,t[f.t("navLanguage")]=navigator.language,t[f.t("events")]=e,t},i=function(t,e){const a=new XMLHttpRequest;a.open("POST",p.requestUrl),a.setRequestHeader("Content-Type","application/json"),a.timeout=p.requestTimeout,a.onload=function(){var e;200==a.status&&4===a.readyState?(e=JSON.parse(a.responseText),p.senderCallback&&p.senderCallback.call(g,t,e,null),n.debug("Request finished with success",a.status)):400<=a.status&&a.status<500&&4===a.readyState?p.senderCallback&&(p.senderCallback.call(g,null,null,a.responseText),n.debug("Request had an error from user side.",a.status)):500===a.status&&p.senderCallback&&(p.senderCallback.call(g,null,null,a.responseText),n.debug("Request had an error on server side.",a.status)),c.cleanStorage(t.events),n.debug("Emptying cache")},a.onerror=function(){n.debug("Request had an error",a.status)},a.ontimeout=function(){n.warn("Timeout occured when sending data",a.status),u(t,e)},n.debug("Sending data:",JSON.stringify(t)),a.send(JSON.stringify(t))},s=function(){a=p.requestRetries},u=function(e,t){t<r||(a?setTimeout(function(){--a,i(e)},p.cacheSendTimeout/p.requestRetries):c.cleanStorage(e.events))}},l=new function(){h.getLogger("user");this.getUserId=function(){return null},this.getGAClientId=function(){return null},this.waitForLoad=function(e){e()}};p.userProviders.cookie=function(){l.getUserId=function(){return f.getCookie(p.userCookieName,p.userCookieExtractRegex,p.userCookieCaptureIndex)},l.waitForLoad=function(e){p.userWaitMaxTimeout?f.waitFor(p.userWaitTimeout,p.userWaitMaxTimeout,0,function(){return!!l.getUserId()},e):e()}},function(){var a={};a[p.GA_RETRIEVAL_ORDER[0]]=function(){return f.getGlobalVar(p.GA_GLOBAL_VAR)},a[p.GA_RETRIEVAL_ORDER[1]]=function(){return f.getCookie(p.GA_COOKIE_NAME,p.GA_COOKIE_REGEX,p.GA_COOKIE_INDEX)},a[p.GA_RETRIEVAL_ORDER[2]]=function(){var e=p.userGaObjectName;if(window.hasOwnProperty(e)&&window[e].hasOwnProperty("getAll")){e=window[e].getAll();if(!e||!e.length)return null;e=e[0].get("clientId");return e&&e.length?e:null}return null};function e(){for(var e,t=0;t<p.userGaIdRetrievalOrder.length;++t)if(null!==(e=a[p.userGaIdRetrievalOrder[t]]()))return e;return i.debug("cannot obtain Google Analytics clientId"),null}l.getGAClientId=e,p.userProviders.ga=function(){l.getUserId=e,l.waitForLoad=function(e){p.userWaitMaxTimeout?f.waitFor(p.userWaitTimeout,p.userWaitMaxTimeout,0,function(){return!!l.getUserId()},e):e()}}}(),p.userProviders.globalvar=function(){l.getUserId=function(){return String(f.getGlobalVar(p.userGlobalVarName))||null},l.waitForLoad=function(e){p.userWaitMaxTimeout?f.waitFor(p.userWaitTimeout,p.userWaitMaxTimeout,0,function(){return!!l.getUserId()},e):e()}},p.userProviders.local=function(){l.getUserId=function(){var e,t,a=null;return(a="cookie"===p.userLocalStorageType?function(){for(var e=document.cookie.split(";"),t=new RegExp(p.userLocalStorageId+"=(.*)"),a=0;a<e.length;++a)if(e[a].includes(p.userLocalStorageId))return e[a].match(t)[1];return null}():window.localStorage.getItem(p.userLocalStorageId))||(a=f.makeId(p.userLocalIdLength),i.debug("UserId was not found. Created new userId:",a),"cookie"===p.userLocalStorageType?(e=a,(t=new Date).setFullYear(t.getFullYear()+5),document.cookie=p.userLocalStorageId+"="+e+"; path=/; expires="+t.toUTCString()):(t=a,window.localStorage.setItem(p.userLocalStorageId,t))),a},l.waitForLoad=function(e){p.userWaitMaxTimeout?f.waitFor(p.userWaitTimeout,p.userWaitMaxTimeout,0,function(){return!!l.getUserId()},e):e()}};var c=function(){var n=h.getLogger("cache");const r=["memory","localStorage"],o=p.cacheType,t=p.cacheStorageKeyName,a=p.cacheSendTimeout,i=p.cacheMaxItems,s=p.cacheCheckTimeout;var e,u=!1,l=[],c=0;this.mutexLock=function(){u=!0},this.mutexUnlock=function(){u=!1};function d(){return JSON.parse(window.sessionStorage.getItem(t))}function g(e){window.sessionStorage.setItem(t,JSON.stringify(e))}this.store=function(e){for(e[f.t("timestamp")]=Date.now(),e[f.t("spent")]=e[f.t("timestamp")]-p.loadTime,e[f.t("originating")]=window.location.href,e[f.t("referrer")]=document.referrer;u;)setTimeout(function(){n.debug("Cache is busy")},1);l.push(e),n.debug("New cache is:",JSON.stringify(l)),o!==r[0]&&g(l)},this.restore=function(){n.debug("Restoring cache"),this.mutexLock(),o===r[1]&&Array.prototype.push.apply(l,d()),n.debug("Restored:",JSON.stringify(l)),this.mutexUnlock()},this.cleanStorage=function(e){var t,a;o===r[1]&&(this.mutexLock(),t=d(),(a=JSON.stringify(e)).replace(/,"gtm\.uniqueEventId":[0-9]+/g,""),n.debug("Comparing datas:",JSON.stringify(e),JSON.stringify(t)),a===JSON.stringify(t)&&(n.debug("Data is matching, will erase cache."),g([])),this.mutexUnlock())},this.sendCache=function(){c=Date.now(),0!==l.length?(this.mutexLock(),e=l,l=[],this.mutexUnlock(),n.debug("Sending cache:",JSON.stringify(e)),w.startSendingData(e)):n.debug("Cache is empty, nothing to send.")},this.startCheck=function(){var e=this;setTimeout(function(){0<l.length&&(l.length>i||Date.now()-c>a)&&e.sendCache(),e.startCheck()},s)}},n=function(){var t=h.getLogger("interceptorDOM");this.initialize=function(){p.samePageLoad?t.debug("Script was reloaded on the same page. The page load event will not sent."):function(){t.debug("Page loaded.");var e={};e[f.t("category")]=f.t("Page"),e[f.t("action")]=f.t("Load"),c.store(e)}()}},d=function(){var a=h.getLogger("interceptorDataLayer");this.filterProps=function(e){if(!p.dataLayerExcludeProps)return e;var t,a={};for(t in e)e.hasOwnProperty(t)&&(p.dataLayerExcludeProps.test(t)&&!p.dataLayerIncludeProps.test(t)||(a[t]=e[t]));return a},this.keepEvent=function(e){if(!(e="getUntrustedUpdateValue"in e?e.getUntrustedUpdateValue():e))return a.debug("Received empty event. Ignoring it."),!1;if(!f.stringifySafe(e))return a.debug("Event is not stringifyable. Ignoring it."),!1;var t=JSON.stringify(e),e=!0;return e&&p.dataLayerExclude&&p.dataLayerExclude.test(t)&&(a.debug("Data Layer event matched the exclusion regex:",p.dataLayerExclude.toString(),t),e=!1),!e&&p.dataLayerInclude&&p.dataLayerInclude.test(t)&&(a.debug("Data Layer event matched the inclusion regex:",p.dataLayerInclude.toString(),t),e=!0),e},this.store=function(e){var t;this.keepEvent(e)&&((t={})[f.t("category")]=f.t("eCommerce"),t[f.t("action")]=f.t("DataLayerPush"),t[f.t("data")]=this.filterProps(e),a.debug("Storing DataLayer event",JSON.stringify(t)),c.store(t))},this.getDataLayerID=function(){return null},this.initialize=function(){a.debug("Running empty DataLayer initialization.")},this.waitFor=function(e){e()}};p.dataLayerProviders.GTM=function(){d.getDataLayerID=function(){for(var e=document.getElementsByTagName("script"),t=/.*['"][a-zA-Z0-9$_]*['"], *['"](GTM[^'"]+)['"]/,a=0;a<e.length;++a)if(e[a].firstChild){var n=e[a].firstChild.nodeValue;if(n.includes("GTM")){n=t.exec(n);if(n&&1<n.length)return i.debug("Found DataLayer name:",n[1]),n[1]}}return null},d.initialize=function(){var e,t=function(){if(!window.hasOwnProperty("dataLayer"))return null;if(window.dataLayer.length&&window.dataLayer.push)return window.dataLayer;for(var e=document.getElementsByTagName("script"),t=/.*['"]([a-zA-Z0-9$_]*)['"], *['"]GTM/,a=0;a<e.length;++a)if(e[a].firstChild){var n=e[a].firstChild.nodeValue;if(n.includes("GTM")){n=t.exec(n);if(1<n.length)return window[n[1]]}}return null}();null!==t?(e=t.push,t.push=function(){d.store(arguments[0]),e.apply(this,arguments)},window[p.dataLayerId]&&window[p.dataLayerId].length&&!p.samePageLoad&&window[p.dataLayerId].forEach(function(e){d.store(e)}),i.debug("DataLayer Interceptor installed.",Date.now()-p.loadTime)):i.debug("DataLayer not found on page. Catching events will not work.")},d.waitFor=function(e){p.dataLayerWaitMaxTimeout?f.waitFor(p.dataLayerWaitTimeout,p.dataLayerWaitMaxTimeout,0,function(){return!!window[p.dataLayerId]},e):e()}},p.dataLayerProviders.tealium=function(){d.getDataLayerID=function(){return window[p.dataLayerId]&&window[p.dataLayerId].id?window[p.dataLayerId].id:null},d.initialize=function(){var e,r=window.hasOwnProperty(p.dataLayerId)?window[p.dataLayerId]:null;null!==r?(r.data&&!p.samePageLoad&&(i.debug("Found initial utag data."),d.store(r.data)),e=function(e,t,a,n){i.debug("Detected change:",e,t,a,n),p.dataLayerExcludeProps.test(e)&&!p.dataLayerIncludeProps.test(e)||d.store(f.deepCopy(r.data)),i.debug("Changes are in excluded property. Ignoring it.")},p.dataLayerWatchProps?watch(r.data,p.dataLayerWatchProps,e):watch(r.data,e),i.debug("DataLayer Interceptor installed.",Date.now()-p.loadTime)):i.debug("Tealium DataLayer not found on page. Catching events will not work.")},d.waitFor=function(e){p.dataLayerWaitMaxTimeout?f.waitFor(p.dataLayerWaitTimeout,p.dataLayerWaitMaxTimeout,0,function(){return!!window[p.dataLayerId]},e):e()}};var e,g,i=h.getLogger("pixel");p.runInsideIframe||window.location===window.parent.location?(e=Object.create({},{push:{value:function(e){this[this.length]=e,this.length+=1},enumerable:!1},length:{value:0,enumerable:!1,writable:!0}}),window.hasOwnProperty("gp")?Array.isArray(window.gp)&&(window.gp=Object.assign(e,window.gp)):window.gp=e,g={config:p,utils:f,user:l,log:h},window.gp[p.id]=g,window.gp_send=f.send_function,window._gp_queue&&(window._gp_queue.forEach(function(e){window.gp_send.apply(window,e)}),window._gp_queue=[])):h.info("running inside iframe is not allowed","\n* window.location:",window.location,"\n* window.parent.location",window.parent.location)}();